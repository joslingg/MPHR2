{% extends 'health_records/base.html' %}
{% block title %}Chi ti·∫øt h·ªì s∆° s·ª©c kho·∫ª{% endblock %}
{% block content %}
<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>üìã H·ªì s∆° s·ª©c kho·∫ª c·ªßa {{ record.employee.full_name }} ({{ record.year }})</h3>
    <a href="{% url 'healthrecord_list' %}" class="btn btn-secondary">‚¨Ö Quay l·∫°i danh s√°ch</a>
  </div>

  <!-- TH√îNG TIN NH√ÇN VI√äN -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-primary text-white fw-bold">Th√¥ng tin nh√¢n vi√™n</div>
    <div class="card-body p-0">
      <table class="table table-bordered mb-0">
        <tr><th class="w-25">M√£ nh√¢n vi√™n</th><td>{{ record.employee.code }}</td></tr>
        <tr><th>H·ªç v√† t√™n</th><td>{{ record.employee.full_name }}</td></tr>
        <tr><th>NƒÉm sinh</th><td>{{ record.employee.birth_year }}</td></tr>
        <tr><th>Gi·ªõi t√≠nh</th><td>{{ record.employee.gender }}</td></tr>
        <tr><th>Ch·ª©c danh ngh·ªÅ nghi·ªáp</th><td>{{ record.employee.job_title }}</td></tr>
        <tr><th>Ch·ª©c v·ª•</th><td>{{ record.employee.position }}</td></tr>
        <tr><th>Khoa/Ph√≤ng</th><td>{{ record.employee.department }}</td></tr>
      </table>
    </div>
  </div>

  <!-- TH√îNG TIN KH√ÅM -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-success text-white fw-bold">Th√¥ng tin kh√°m</div>
    <div class="card-body p-0">
      <table class="table table-bordered mb-0">
        <tr><th class="w-25">NƒÉm kh√°m</th><td>{{ record.year }}</td></tr>
        <tr><th>Ng√†y kh√°m</th><td>{{ record.exam_date|date:"d/m/Y" }}</td></tr>
        <tr><th>Lo·∫°i kh√°m</th><td>{{ record.examination_type }}</td></tr>
        <tr><th>C∆° s·ªü kh√°m</th><td>{{ record.clinic_name }}</td></tr>
      </table>
    </div>
  </div>

  <!-- S·ªê ƒêO & HUY·∫æT √ÅP -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-info text-white fw-bold">Ch·ªâ s·ªë ƒëo ƒë∆∞·ª£c</div>
    <div class="card-body p-0">
      <table class="table table-bordered mb-0">
        <tr><th class="w-25">Chi·ªÅu cao (cm)</th><td>{{ record.height_cm }}</td></tr>
        <tr><th>C√¢n n·∫∑ng (kg)</th><td>{{ record.weight_kg }}</td></tr>
        <tr><th>Huy·∫øt √°p (mmHg)</th><td>{{ record.blood_pressure }}</td></tr>
      </table>
    </div>
  </div>

  <!-- VACCINE -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-warning fw-bold">Th√¥ng tin ti√™m ch·ªßng</div>
    <div class="card-body p-0">
      <table class="table table-bordered mb-0">
        <tr><th class="w-25">ƒê√£ ti√™m v·∫Øc-xin</th><td>{{ record.vaccinated|yesno:"C√≥,Kh√¥ng" }}</td></tr>
        {% if record.vaccinated %}
        <tr><th>T√™n v·∫Øc-xin</th><td>{{ record.vaccine_name }}</td></tr>
        <tr><th>Ng√†y ti√™m ch·ªßng</th><td>{{ record.vaccination_date|date:"d/m/Y" }}</td></tr>
        {% endif %}
      </table>
    </div>
  </div>

  <!-- K·∫æT QU·∫¢ -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-secondary text-white fw-bold">K·∫øt qu·∫£ & Ph√¢n lo·∫°i</div>
    <div class="card-body p-0">
      <table class="table table-bordered mb-0">
        <tr><th class="w-25">Ph√¢n lo·∫°i s·ª©c kho·∫ª</th><td>{{ record.health_classification }}</td></tr>
        <tr><th>K·∫øt lu·∫≠n</th><td>{{ record.conclusion }}</td></tr>
      </table>
    </div>
  </div>

  <!-- KH√ÅC -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-dark text-white fw-bold">Th√¥ng tin kh√°c</div>
    <div class="card-body p-0">
      <table class="table table-bordered mb-0">
        <tr>
          <th class="w-25">File k·∫øt qu·∫£</th>
          <td>
            {% if record.result_file %}
              <a href="{{ record.result_file.url }}" target="_blank" class="btn btn-sm btn-outline-primary">
                üìÑ Xem file
              </a>
            {% else %}
              <span class="text-muted">Ch∆∞a c√≥ file</span>
            {% endif %}
          </td>
        </tr>
        <tr><th>Ghi ch√∫</th><td>{{ record.note|default:"‚Äî" }}</td></tr>
        <tr><th>Ng√†y t·∫°o</th><td>{{ record.created_at|date:"d/m/Y H:i" }}</td></tr>
        <tr><th>C·∫≠p nh·∫≠t g·∫ßn nh·∫•t</th><td>{{ record.updated_at|date:"d/m/Y H:i" }}</td></tr>
      </table>
    </div>
  </div>

</div>
{% endblock %}
