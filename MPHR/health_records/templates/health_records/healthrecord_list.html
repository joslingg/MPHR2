{% extends 'health_records/base.html' %}
{% block title %}Danh sách hồ sơ{% endblock %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="mb-0">Danh sách hồ sơ khám sức khoẻ</h3>
  <div class="d-flex gap-2">
    <a href="{% url 'healthrecord_add' %}" class="btn btn-success d-flex align-items-center px-3">
      <i class="bi bi-plus-circle me-2"></i> Thêm hồ sơ
    </a>
    <a href="{% url 'import_health_records' %}" class="btn btn-outline-primary d-flex align-items-center px-3">
      <i class="bi bi-upload me-2"></i> Import hồ sơ
    </a>
  </div>
</div>

<table class="table table-striped table-bordered align-middle">
  <thead class="table-primary text-center">
    <tr class="align-middle">
      <th>STT</th>
      <th>Họ tên</th>
      <th>Năm sinh</th>
      <th>Giới tính</th>
      <th>Khoa/Phòng</th>
      <th>Loại khám</th>
      <th>Phân loại</th>
      <th>Kết luận</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for record in records %}
    <tr class="align-middle text-center">
      <td>{{ forloop.counter }}</td>
      <td class="text-left name-cell"><a href="{% url 'health_record_detail' record.id %}" class="link">{{ record.full_name }}</a></td>
      <td>{{ record.birth_year }}</td>
      <td>{{ record.gender }}</td>
      <td>{{ record.department }}</td>
      <td>{{ record.exam_type }}</td>
      <td>{{ record.health_classification }}</td>
      <td>{{ record.conclusion }}</td>
      <td class="text-center align-middle">
        <div class="d-flex justify-content-center flex-wrap gap-2">
          <a href="{% url 'health_record_detail' record.id %}" class="btn btn-sm btn-success">Chi tiết</a>
          <a href="{% url 'healthrecord_edit' record.id %}" class="btn btn-sm btn-primary">Sửa</a>
          <a href="{% url 'healthrecord_delete' record.id %}" class="btn btn-sm btn-danger">Xoá</a>
        </div>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="9" class="text-center text-muted">Chưa có hồ sơ nào</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
